---
title: ç¬æ™‚è¨ˆåŠƒåˆ»
description: ç¬æ™‚è¨ˆåŠƒåˆ» - Instant Tile Tick(ITT)
---

## ç¬æ™‚è¨ˆåŠƒåˆ» (Instant Tile Tick - ITT)

minecraft ç‚ºäº†åœ¨å€å¡Šè£é£¾æ™‚é å…ˆè™•ç†æµé«”ç­‰æ–¹å¡Šï¼Œæ•…æ·»åŠ äº†æœ¬è¦å‰‡ã€‚(_**å¾ŒçºŒæ–‡ç« å¯èƒ½æœƒä½¿ç”¨ `ITT` ä¾†ä»£æŒ‡å®ƒ \[ç¬æ™‚è¨ˆåŠƒåˆ» Instant Tile Tick]**_)

ç”±æ–¼ scheduledUpdatesAreImmediate æ˜¯æ”¾ç½®åœ¨ World çš„ï¼Œä¹Ÿå°±ä»£è¡¨è©² flag æ˜¯ä¾è³´ç·¯åº¦çš„ï¼Œå„å€‹ç·¯åº¦ä¸æœƒç›¸äº’å½±éŸ¿ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ç¾éšæ®µçµ‚ç•Œæ˜¯ç„¡æ³•ç²å– ITT çš„(ç”±æ–¼ä¸æœƒæ”¾ç½®æ°´ç­‰æµé«”)ã€‚

ITT åªæœƒå½±éŸ¿ï¼Œç¯„åœ $\pm8$ æ–¹å¡Šï¼Œä¹Ÿå°±æ˜¯ 16Ã—16Ã—16 æ–¹å¡Šå€åŸŸï¼ˆå‰›å¥½ä¸€å€‹ chunk å¤§å°ï¼‰ã€‚

- `WorldGenHellLava` åœ°åŸŸå²©æ¼¿
- `WorldGenLiquids` åŸºæœ¬æµé«”
- `StructureNetherBridgePieces` åœ°åŸŸå ¡å£˜ç”Ÿæˆ (ç”±æ–¼æ”¾ç½®äº† `FLOWING_LAVA` [æµå‹•å²©æ¼¿])

::code-group
```java{2} [World.java] line-numbers
public abstract class World implements IBlockAccess {
  public boolean scheduledUpdatesAreImmediate; // [!code focus]
}
```

```java [WorldServer.java] line-numbers
public class WorldServer extends World implements IThreadListener {
  public void updateBlockTick(BlockPos pos, Block blockIn, int delay, int priority) {
    Material material = blockIn.getDefaultState().getMaterial();

    if (this.scheduledUpdatesAreImmediate && material != Material.AIR) {
      if (blockIn.requiresUpdates() && this.isAreaLoaded(pos.add(-8, -8, -8), pos.add(8, 8, 8))) {
        IBlockState iblockstate = this.getBlockState(pos);
        if (iblockstate.getMaterial() != Material.AIR && iblockstate.getBlock() == blockIn) {
          iblockstate.getBlock().updateTick(this, pos, iblockstate, this.rand);
        }
      }
      delay = 1;
    }

    NextTickListEntry nextticklistentry = new NextTickListEntry(pos, blockIn);
    if (this.isBlockLoaded(pos)) {
      if (material != Material.AIR) {
        nextticklistentry.setScheduledTime((long) delay + this.worldInfo.getWorldTotalTime());
        nextticklistentry.setPriority(priority);
      }

      if (!this.pendingTickListEntriesHashSet.contains(nextticklistentry)) {
        this.pendingTickListEntriesHashSet.add(nextticklistentry);
        this.pendingTickListEntriesTreeSet.add(nextticklistentry);
      }
    }
  }
}
```
::


## åœ¨å“ªè¢«ä¿®æ”¹

`scheduledUpdatesAreImmediate` æœƒåœ¨ `immediateBlockTick` å‡½æ•¸å…§è¢«ä¿®æ”¹ã€‚

```java{3,5} [World.java] line-numbers
public abstract class World implements IBlockAccess {
  public void immediateBlockTick(BlockPos pos, IBlockState state, Random random) {
    this.scheduledUpdatesAreImmediate = true;
    state.getBlock().updateTick(this, pos, state, random);
    this.scheduledUpdatesAreImmediate = false;
  }
}
```

è€Œ `immediateBlockTick` æœƒè¢«ä¸‹é¢é€™äº›ä»£ç¢¼å‘¼å«ã€‚

::code-group
```java{1,4,18,23,24} [WorldGenHellLava.java] collapse height=150 line-numbers
public class WorldGenHellLava extends WorldGenerator { // [!code focus] åœ°ç„å²©æ¼¿ç”Ÿæˆ
  // ...

  public boolean generate(World worldIn, Random rand, BlockPos position) { // [!code focus]
    if (worldIn.getBlockState(position.up()).getBlock() != Blocks.NETHERRACK) {
      return false;
    }
    // ...
    else {
      int i = 0;
      int j = 0;

      // ...

      if (!this.insideRock && i == 4 && j == 1 || i == 5) {
        IBlockState iblockstate = this.block.getDefaultState();
        worldIn.setBlockState(position, iblockstate, 2);
        worldIn.immediateBlockTick(position, iblockstate, rand); // [!code focus]
      }

      return true;
    }
  } // [!code focus]
} // [!code focus]
```

```java{1,4,22,28,29} [WorldGenLiquids.java] collapse height=150 line-numbers
public class WorldGenLiquids extends WorldGenerator { // [!code focus] åŸºæœ¬æµé«”ç”Ÿæˆ
  // ...

  public boolean generate(World worldIn, Random rand, BlockPos position) { // [!code focus]
    if (worldIn.getBlockState(position.up()).getBlock() != Blocks.STONE) {
      return false;
    }
    // ...
    else {
      IBlockState iblockstate = worldIn.getBlockState(position);
      if (iblockstate.getMaterial() != Material.AIR && iblockstate.getBlock() != Blocks.STONE) {
        return false;
      } else {
        int i = 0;
        int j = 0;

        // ...

        if (i == 3 && j == 1) {
          IBlockState iblockstate1 = this.block.getDefaultState();
          worldIn.setBlockState(position, iblockstate1, 2);
          worldIn.immediateBlockTick(position, iblockstate1, rand); // [!code focus]
        }

        return true;
      }
    }
  } // [!code focus]
} // [!code focus]
```

```java{1,2,5,19,23,24,25} [StructureNetherBridgePieces.java] collapse height=150 line-numbers
public class StructureNetherBridgePieces { // [!code focus] åœ°ç„è¦å¡ç”Ÿæˆ
  public static class Entrance extends StructureNetherBridgePieces.Piece { // [!code focus]
    // ...

    public boolean addComponentParts(World worldIn, Random randomIn, StructureBoundingBox structureBoundingBoxIn) { // [!code focus]
      // ... å¡«å……å„å¼æ–¹å¡Š

      this.fillWithBlocks(worldIn, structureBoundingBoxIn, 5, 5, 5, 7, 5, 7,
          Blocks.NETHER_BRICK.getDefaultState(), Blocks.NETHER_BRICK.getDefaultState(), false);
      this.fillWithBlocks(worldIn, structureBoundingBoxIn, 6, 1, 6, 6, 4, 6, Blocks.AIR.getDefaultState(),
          Blocks.AIR.getDefaultState(), false);
      this.setBlockState(worldIn, Blocks.NETHER_BRICK.getDefaultState(), 6, 0, 6, structureBoundingBoxIn);
      IBlockState iblockstate = Blocks.FLOWING_LAVA.getDefaultState();
      this.setBlockState(worldIn, iblockstate, 6, 5, 6, structureBoundingBoxIn);
      BlockPos blockpos = new BlockPos(this.getXWithOffset(6, 6), this.getYWithOffset(5),
          this.getZWithOffset(6, 6));

      if (structureBoundingBoxIn.isVecInside(blockpos)) {
        worldIn.immediateBlockTick(blockpos, iblockstate, randomIn); // [!code focus]
      }

      return true;
    } // [!code focus]
  } // [!code focus]
} // [!code focus]
```
::

## å¦‚ä½•é–‹å•Ÿ

åœ¨å€å¡Šç”Ÿæˆ(è£é£¾)æ™‚ï¼Œæœƒé–‹å•Ÿ `ITT`ï¼Œä¸¦æ”¾ç½®æ°´ã€å²©æ¼¿ç­‰æ–¹å¡Šã€‚
ç”±æ–¼ ITT é–‹å•Ÿï¼Œé€™äº›æ–¹å¡Šæœƒç«‹åˆ»æµå‹•å®Œç•¢ã€‚è‹¥æ­¤æ™‚ç”¢ç”Ÿæ›´æ–°æŠ‘åˆ¶ï¼Œå¾ŒçºŒç¨‹å¼ï¼ˆåŒ…å«é—œé–‰ `ITT`ï¼‰æœƒè¢«è·³éï¼Œå°è‡´ ITT æœªè¢«é—œé–‰ã€‚

## å¦‚ä½•é—œé–‰

1. é‡å•Ÿæœå‹™å™¨
2. é‡æ–°åŠ è¼‰ä¹‹å‰æœªè¢«åŠ è¼‰éçš„å€å¡Š (è£é£¾)

## é–‹å•Ÿæ™‚å½±éŸ¿

### åµæ¸¬å™¨

é–‹å•Ÿå¾Œåµæ¸¬å™¨æª¢æ¸¬åµæ¸¬å™¨æ™‚ï¼Œä¸ç®¡æ˜¯äº®é‚„æ˜¯æ»…éƒ½æœƒè¢«ä¸‹ä¸€å€‹åµæ¸¬å™¨æª¢æ¸¬åˆ°ï¼Œé€ æˆ**æŒ‡æ•¸ç´šæ›´æ–°**ã€‚è«‹æ³¨æ„ä¸è¦åœ¨ä¸»ç·šç¨‹æ”¾ç½®æœƒå°è‡´ä¸»ç·šç¨‹å¡æ­»ä¸¦è§¸ç™¼ WatchDog è¶…æ™‚å´©æ½°ã€‚

### æ³¨æ„äº‹é …

1. ä¸å¯å†ä¸»é€²ç¨‹æ”¾ç½®è‡‰å°è‡‰æˆ–é•·åµæ¸¬å™¨éˆç­‰æœƒé€ æˆæŒ‡æ•¸ç´šæ›´æ–°çš„æ–¹å¡Šï¼Œé€™æœƒå°è‡´ä¸»ç·šç¨‹å¡æ­»
2. ä¸å¯æ”¾ç½®åŠæ›´æ–°:

::div{class="ml-4"}
- å†°éœœ
- çµ†ç·šé‰¤
- å£“åŠ›æ¿ ~~< è«‹ç‰¹åˆ¥æ³¨æ„ä»–ï¼Œç”±å…¶æ˜¯ç¥å¥‡æ‘èŠ !!! æœƒæœ‰ä¸€å †ç¥å¥‡å£“åŠ›ç‰ˆæ¡Œå­ï¼Œæ‘æ°‘æœƒç¢°åˆ° :smart-icon{name="ğŸ˜­"}~~
- æ„Ÿæ¸¬éµè»Œ
- æ¸›æ³•æ¯”è¼ƒå™¨é«˜é »
::
